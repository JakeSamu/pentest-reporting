import automation.latex_conversion.converter.md2latex.md2latex as md2latex
from automation.const import *


#todo: separate into several files and do same as findinggrabber: save dates
def grab_appendix ():
    run_script("appendixgrabber")
    appendix = GENERATEDFILE
    for file in os.listdir(APPENDIX_PATH):
        if file.endswith(".md"):
            # just add the chapter if the appendix is not empty
            if "\\appendix\n\\chapter{Appendix}\n" not in appendix:
                appendix += "\\appendix\n\\chapter{Appendix}\n"
            
            appendix += md2latex.file_to_string(os.path.join(APPENDIX_PATH, file)) + "\n\n"
    
    appendix_writer = open(CONVERTED_APPENDIX_FILE, "w", encoding="utf-8")
    appendix_writer.write(appendix)
    appendix_writer.close()

if __name__ == "__main__":
    grab_appendix()