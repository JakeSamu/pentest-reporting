from automation.const import *


# get all scripts in correct folder - currently not in use
def getscripts(dir):
    scripts = []
    for direlement in os.listdir(dir):
        if direlement.endswith(".py") and not direlement.startswith("__"):
            scripts.append(os.path.join(dir,direlement))
    return scripts

def callscript(script):
    print("Calling script \""+script+"\"")
    os.system("python "+script)

def prepare(args):
    scriptpath = "automation"

    #todo: multiprocessing the scripts? if yes, then for integrity checker only after latex_conversion is done
    latex_conversion_scripts = getscripts(os.path.join(scriptpath,"latex_conversion"))
    integritychecks = getscripts(os.path.join(scriptpath,"latex_conversion","integrity_checker"))

    print("\n### Call all scripts needed for LaTeX preparation")
    from automation.latex_conversion.appendixgrabber import grab_appendix as grab_appendix
    grab_appendix()

    from automation.latex_conversion.findinggrabber import grab_findings as grab_findings
    grab_findings()
    
    from automation.latex_conversion.jsongrabber import grab_json as grab_json
    grab_json()
    
    from automation.latex_conversion.integrity_checker.latex_integrity_checker import latex_integrity_check as latex_integrity_check
    latex_integrity_check()
